# 전력 네트워크 시뮬레이터 (Power Network Simulator)

🔌 **실시간 전력망 시뮬레이션 & Waypoint 기반 송전선 경로 설계**

## 🌟 주요 기능

### ⚡ 전력 시뮬레이션
- **실시간 전력 흐름 계산** (Edmonds-Karp 최대 유량 알고리즘)
- **다양한 발전소 타입**: 풍력, 태양광, 수력, 수소저장
- **스마트 그리드 시스템** 및 배터리 저장
- **날씨 및 시간대별 수요 변화** 시뮬레이션
- **정전 감지 및 부족 전력량 계산**

### 🛤️ 송전선 Waypoint 시스템 (핵심 기능!)
- **송전선을 원하는 구간에서 자유롭게 꺾기**
- **직관적인 드래그 앤 드롭** 방식의 waypoint 편집
- **송전선 위 클릭으로 waypoint 자동 삽입**
- **부드러운 곡선** (Catmull-Rom Spline) 렌더링
- **실시간 시각적 피드백**

### 🎮 사용자 인터페이스
- **Pygame 기반 인터랙티브 UI**
- **마우스 드래그**로 건물 이동
- **컨텍스트 메뉴**로 빠른 편집
- **AI 자동 업그레이드** 시스템
- **시나리오 기반 시뮬레이션**

## 🚀 설치 및 실행

### 필수 요구사항
```bash
pip install pygame numpy
```

### 실행 방법
```bash
cd python_codes
python main.py
```

### 웹 인터페이스 (선택사항)
```bash
python main.py --web
```

## 🛠️ Waypoint 송전선 편집 방법

### 방법 1: 경유지 버튼 사용
1. **오른쪽 패널의 "경유지" 버튼** 클릭
2. **송전선을 클릭**하여 선택
3. 자동으로 waypoint 편집 모드 시작

### 방법 2: 송전선 우클릭
1. **송전선을 우클릭**
2. **"경유점 편집"** 메뉴 선택

### 편집 조작법
- **송전선 위 클릭**: 해당 지점에 waypoint 추가
- **waypoint 드래그**: 위치 이동
- **waypoint 우클릭**: 해당 waypoint 삭제
- **빈 공간 우클릭**: 마지막 waypoint 삭제
- **Enter**: 저장 및 완료
- **ESC**: 취소

## 🏗️ 프로젝트 구조

```
📦 Power Network Simulator
├── 📁 python_codes/
│   ├── 🐍 main.py              # 메인 실행 파일
│   ├── 🐍 city.py              # 건물/송전선 클래스 (waypoint 로직 포함)
│   ├── 🐍 drawer_ui.py         # UI 이벤트 처리
│   ├── 🐍 drawer_render.py     # 렌더링 엔진
│   ├── 🐍 algorithms.py        # 최대 유량 알고리즘
│   ├── 🐍 modules/
│   │   ├── 🐍 power.py         # 전력 시스템
│   │   ├── 🐍 weather.py       # 날씨 시스템
│   │   └── 🐍 simulator.py     # 메인 시뮬레이터
│   └── 📁 scenarios/           # 시나리오 파일들
└── 📄 README.md
```

## 🎯 기술적 특징

### Waypoint 시스템 구현
- **PowerLine 클래스**에 waypoint 리스트 저장
- **선분-점 거리 계산**을 통한 정확한 삽입 위치 결정
- **실시간 드래그** 중 위치 업데이트
- **Catmull-Rom Spline**으로 자연스러운 곡선 생성

### 전력 흐름 계산
- **Edmonds-Karp 알고리즘**으로 최대 유량 계산
- **BFS 기반 증강 경로** 탐색
- **잔여 그래프** 구성으로 효율적 계산

### 렌더링 최적화
- **파티클 시스템**으로 전력 흐름 시각화
- **글로우 효과**와 **사용률 기반 색상** 변화
- **건물별 타입 구분** 렌더링

## 🎮 시나리오

- **기본 시나리오**: 간단한 전력망 구성
- **재생에너지 시나리오**: 태양광/풍력 중심 구성
- **스마트 그리드 시나리오**: 배터리 저장 시스템
- **복합 에너지 시나리오**: 다양한 발전원 통합

## 🤖 AI 업그레이드

- **자동 송전선 용량 증설**
- **효율적 발전소 배치**
- **배터리 시스템 최적화**
- **스마트 그리드 도입**

## 📊 실시간 모니터링

- 총 발전량/수요량 추적
- 송전 흐름량 계산
- 정전 발생 모니터링
- 시간대별 수요 패턴 분석

## 🌍 환경 시뮬레이션

- **날씨 시스템**: 온도, 습도, 풍속, 일사량
- **시간대별 수요 변화**
- **계절별 발전량 변동**
- **재생에너지 출력 변화**

---

**개발자**: Claude & 사용자 협업  
**라이선스**: MIT  
**언어**: Python 3.7+  
**UI 프레임워크**: Pygame  

🎉 **특별한 점**: 이 프로젝트의 가장 큰 특징은 **송전선을 원하는 구간에서 자유롭게 꺾을 수 있는 waypoint 시스템**입니다!